---
import Layout from "../layouts/Layout.astro";
import "leaflet/dist/leaflet.css";
---

<Layout>
  <h1 class="text-2xl">Carte des Établissements Universitaires</h1>
  <p class="description">Localisation des établissements d'enseignement supérieur en France</p>
  
  <div id="map" style="height: 600px; margin-top: 2rem;"></div>
  
  <a href="/" class="back-link">← Retour à l'accueil</a>
</Layout>

<script>
import listeEtablissements from "../assets/listeEtablissements.json";

// Import de la bibliothèque Leaflet pour créer la carte interactive
import L from "leaflet";
// Dans l'élément d'ID "map" : création de la carte centrée sur la France (lat: 46.6033, lon: 1.883) avec un zoom niveau 6
const map = L.map("map").setView([46.6033, 1.883], 6);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

// Ajout des marqueurs pour chaque établissement universitaire en utilisant les données du fichier JSON
listeEtablissements.forEach(est => {
  const marker = L.marker([est.lat, est.lon]).addTo(map);
  marker.bindPopup(`<b>${est.name}</b>`);
});
</script>

<style>
  .description {
    color: #555;
    font-size: 1rem;
    margin-top: 0.5rem;
  }
  
  .back-link {
    display: inline-block;
    margin-top: 2rem;
    color: #0066cc;
    text-decoration: none;
  }
  
  .back-link:hover {
    text-decoration: underline;
  }
</style>
